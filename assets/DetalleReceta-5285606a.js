import{r as a,u as h,j as t,L as p,a as n,b as u}from"./index-d0e1863e.js";import{g,M as f,E as N}from"./constants-e07bb1fa.js";const y=l=>{const[e,o]=a.useState(null),[d,i]=a.useState(!0),[m,c]=a.useState(null);return a.useEffect(()=>{if(!l){c("ID de receta no proporcionado"),i(!1);return}(async()=>{try{i(!0),c(null);const s=await g(`/recipes/${l}/information`);if(s&&s.id)o(s);else throw new Error("Receta no encontrada")}catch(s){console.error("Error al cargar receta:",s),c(s.message||"Error al cargar la receta"),o(null)}finally{i(!1)}})()},[l]),{receta:e,loading:d,error:m}};const x=()=>{const{id:l}=h(),{receta:e,loading:o,error:d}=y(l),i=a.useMemo(()=>e!=null&&e.extendedIngredients?e.extendedIngredients.map(r=>({name:r.name||r.original||"Ingrediente",amount:r.amount,unit:r.unit,original:r.original})):[],[e]),m=a.useMemo(()=>!(e!=null&&e.dishTypes)||!Array.isArray(e.dishTypes)?[]:e.dishTypes,[e]),c=a.useMemo(()=>e!=null&&e.instructions?e.instructions.includes("<")?e.instructions:e.instructions.split(/\d+\./).filter(r=>r.trim()).map((r,s)=>`${s+1}. ${r.trim()}`).join(`

`):"No hay instrucciones disponibles.",[e]);return o?t(p,{message:f.LOADING_RECETA}):d?n("div",{className:"contenedorDetalle",children:[t(N,{error:d}),t("div",{className:"text-center mt-4",children:t(u,{to:"/",className:"btn btn-primary",children:"Volver al inicio"})})]}):e?t("div",{className:"contenedorDetalle",children:n("div",{className:"card mb-3 text-center shadow align-items-center detalle-receta-card",children:[t("img",{className:"card-img-top detalle-receta-image",src:e.image,alt:e.title,loading:"lazy"}),n("div",{className:"recetadetalle card-body text-center",children:[t("h3",{className:"card-title",children:t("strong",{children:e.title})}),e.readyInMinutes&&n("p",{className:"pt-2 text-muted",children:["‚è±Ô∏è Tiempo de preparaci√≥n: ",e.readyInMinutes," minutos"]}),e.servings&&n("p",{className:"text-muted",children:["üë• Porciones: ",e.servings]}),m.length>0&&n("div",{className:"pt-3",children:[t("strong",{children:"Tipos de platos: "}),t("span",{className:"badge bg-success me-1",children:m.join(", ")})]}),i.length>0&&n("div",{className:"pt-3",children:[t("strong",{children:"Ingredientes: "}),t("ul",{className:"list-group list-group-flush mt-2 text-start",children:i.map((r,s)=>t("li",{className:"list-group-item",children:r.amount&&r.unit?`${r.amount} ${r.unit} de ${r.name}`:r.original||r.name},s))})]}),n("div",{className:"pt-3",children:[t("strong",{children:"Instrucciones: "}),t("div",{className:"instrucciones-texto mt-2",dangerouslySetInnerHTML:{__html:c}})]}),n("div",{className:"mt-4",children:[t(u,{to:"/",className:"btn btn-outline-primary me-2",children:"‚Üê Volver"}),e.sourceUrl&&t("a",{href:e.sourceUrl,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary",children:"Ver receta original"})]})]})]})}):null};export{x as DetalleReceta};
