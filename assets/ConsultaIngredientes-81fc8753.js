import{r as l,a as o,j as t,L as p}from"./index-d0e1863e.js";import{g as I,M as h,E as S}from"./constants-e07bb1fa.js";import{E as y,R as E}from"./EmptyState-bad0bbb3.js";const v=()=>{const[c,a]=l.useState([]),[d,m]=l.useState(!1),[u,g]=l.useState(null);return{resultados:c,loading:d,error:u,buscarRecetas:async n=>{const r=n.filter(e=>e&&e.trim()!=="").map(encodeURIComponent).join(",");if(!r){g("Debes ingresar al menos un ingrediente"),a([]);return}try{m(!0),g(null);const e=await I(`/recipes/findByIngredients?ingredients=${r}`);Array.isArray(e)?a(e):e!=null&&e.results&&Array.isArray(e.results)?a(e.results):a([])}catch(e){console.error("Error al buscar recetas:",e),g(e.message||"Error al consultar la API"),a([])}finally{m(!1)}}}};const L=()=>{const[c,a]=l.useState(""),[d,m]=l.useState(""),[u,g]=l.useState(""),{resultados:i,loading:n,error:r,buscarRecetas:e}=v(),b=l.useCallback(async s=>{s.preventDefault(),await e([c,d,u])},[c,d,u,e]);return o("div",{className:"container",children:[t("h1",{className:"mb-4",children:"Buscar recetas por ingrediente"}),o("form",{onSubmit:b,children:[r&&t("div",{className:"alert alert-danger",role:"alert",children:r}),[{val:c,fn:a,label:"Ingrediente 1",id:"ing1"},{val:d,fn:m,label:"Ingrediente 2",id:"ing2"},{val:u,fn:g,label:"Ingrediente 3",id:"ing3"}].map(s=>o("div",{className:"mb-3",children:[o("label",{htmlFor:s.id,className:"form-label",children:[s.label,":"]}),t("input",{id:s.id,type:"text",className:"form-control",value:s.val,onChange:f=>s.fn(f.target.value),placeholder:`Ej: ${s.label.toLowerCase()}`,"aria-label":s.label})]},s.id)),t("button",{type:"submit",className:"btn btn-success",disabled:n,children:n?"Buscando...":"Consultar"})]}),n&&t(p,{message:h.LOADING_BUSQUEDA}),!n&&r&&i.length===0&&t(S,{error:r,onRetry:()=>b({preventDefault:()=>{}})}),!n&&!r&&i.length===0&&t(y,{title:h.NO_RESULTADOS,message:"Intenta con otros ingredientes o busca recetas en la pÃ¡gina principal.",icon:"ðŸ”"}),!n&&i.length>0&&o("div",{className:"mt-4",children:[o("h2",{children:["Resultados (",i.length,"):"]}),t("ul",{className:"recetasGrid",children:i.map(s=>t(E,{receta:s},s.id))})]})]})};export{L as ConsultaIngredientes};
